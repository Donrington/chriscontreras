{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Windows/Desktop/MyProjects/website-cleaning-concept/app/api/contact/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from \"next/server\"\r\nimport { z } from \"zod\"\r\n\r\n/**\r\n * Contact Form API Route\r\n *\r\n * This API route handles form submissions from the contact modal.\r\n * Currently logs submissions to console. To enable email sending:\r\n *\r\n * Option 1 - Resend (Recommended):\r\n * 1. Install: npm install resend\r\n * 2. Get API key from https://resend.com\r\n * 3. Add to .env.local: RESEND_API_KEY=your_key_here\r\n * 4. Uncomment Resend code below\r\n *\r\n * Option 2 - SendGrid:\r\n * 1. Install: npm install @sendgrid/mail\r\n * 2. Get API key from https://sendgrid.com\r\n * 3. Add to .env.local: SENDGRID_API_KEY=your_key_here\r\n *\r\n * Option 3 - Nodemailer (SMTP):\r\n * 1. Install: npm install nodemailer\r\n * 2. Configure SMTP settings in .env.local\r\n */\r\n\r\n// Email validation schema\r\nconst contactSchema = z.object({\r\n  name: z.string().min(2, \"Name must be at least 2 characters\"),\r\n  email: z.string().email(\"Invalid email address\"),\r\n  phone: z.string().optional(),\r\n  message: z.string().min(10, \"Message must be at least 10 characters\"),\r\n})\r\n\r\nexport async function POST(request: NextRequest) {\r\n  try {\r\n    const body = await request.json()\r\n\r\n    // Validate the request body\r\n    const validatedData = contactSchema.parse(body)\r\n\r\n    // Log submission for testing\r\n    console.log(\"ðŸ“§ Contact form submission:\", {\r\n      to: 'Zal423306@gmail.com',\r\n      from: validatedData.email,\r\n      subject: `New Contact Form Submission from ${validatedData.name}`,\r\n      data: validatedData,\r\n    })\r\n\r\n    // Send email using Resend\r\n    const { Resend } = await import('resend')\r\n    const resend = new Resend(process.env.RESEND_API_KEY)\r\n\r\n    await resend.emails.send({\r\n      from: 'Contact Form <onboarding@resend.dev>',\r\n      to: 'Zal423306@gmail.com',\r\n      subject: `New Contact Form Submission from ${validatedData.name}`,\r\n      html: `\r\n        <div style=\"font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;\">\r\n          <h2 style=\"color: #1C4274; border-bottom: 2px solid #F5E6CC; padding-bottom: 10px;\">\r\n            New Contact Form Submission\r\n          </h2>\r\n          <div style=\"background: #F4F7FA; padding: 20px; border-radius: 8px; margin: 20px 0;\">\r\n            <p><strong>Name:</strong> ${validatedData.name}</p>\r\n            <p><strong>Email:</strong> <a href=\"mailto:${validatedData.email}\">${validatedData.email}</a></p>\r\n            <p><strong>Phone:</strong> ${validatedData.phone || 'Not provided'}</p>\r\n          </div>\r\n          <div style=\"margin: 20px 0;\">\r\n            <h3 style=\"color: #1C4274;\">Message:</h3>\r\n            <p style=\"line-height: 1.6;\">${validatedData.message}</p>\r\n          </div>\r\n          <hr style=\"border: none; border-top: 1px solid #F5E6CC; margin: 20px 0;\" />\r\n          <p style=\"color: #666; font-size: 12px;\">\r\n            Sent from Chris Contreras Cleaning website\r\n          </p>\r\n        </div>\r\n      `,\r\n    })\r\n\r\n    // ============================================================\r\n    // OPTION 2: SendGrid\r\n    // ============================================================\r\n    /*\r\n    const sgMail = await import('@sendgrid/mail')\r\n    sgMail.default.setApiKey(process.env.SENDGRID_API_KEY!)\r\n\r\n    await sgMail.default.send({\r\n      to: 'carryoby@gmail.com',\r\n      from: 'your-verified-sender@yourdomain.com', // Must be verified in SendGrid\r\n      subject: `New Contact Form Submission from ${validatedData.name}`,\r\n      html: `\r\n        <h2>New Contact Form Submission</h2>\r\n        <p><strong>Name:</strong> ${validatedData.name}</p>\r\n        <p><strong>Email:</strong> ${validatedData.email}</p>\r\n        <p><strong>Phone:</strong> ${validatedData.phone || 'Not provided'}</p>\r\n        <p><strong>Message:</strong></p>\r\n        <p>${validatedData.message}</p>\r\n      `,\r\n    })\r\n    */\r\n\r\n    return NextResponse.json(\r\n      {\r\n        success: true,\r\n        message: \"Form submitted successfully\",\r\n      },\r\n      { status: 200 }\r\n    )\r\n  } catch (error) {\r\n    console.error(\"Contact form error:\", error)\r\n\r\n    if (error instanceof z.ZodError) {\r\n      return NextResponse.json(\r\n        {\r\n          success: false,\r\n          error: error.errors[0].message,\r\n        },\r\n        { status: 400 }\r\n      )\r\n    }\r\n\r\n    return NextResponse.json(\r\n      {\r\n        success: false,\r\n        error: \"Failed to submit form. Please try again.\",\r\n      },\r\n      { status: 500 }\r\n    )\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEA;;;;;;;;;;;;;;;;;;;;CAoBC,GAED,0BAA0B;AAC1B,MAAM,gBAAgB,yKAAC,CAAC,MAAM,CAAC;IAC7B,MAAM,yKAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG;IACxB,OAAO,yKAAC,CAAC,MAAM,GAAG,KAAK,CAAC;IACxB,OAAO,yKAAC,CAAC,MAAM,GAAG,QAAQ;IAC1B,SAAS,yKAAC,CAAC,MAAM,GAAG,GAAG,CAAC,IAAI;AAC9B;AAEO,eAAe,KAAK,OAAoB;IAC7C,IAAI;QACF,MAAM,OAAO,MAAM,QAAQ,IAAI;QAE/B,4BAA4B;QAC5B,MAAM,gBAAgB,cAAc,KAAK,CAAC;QAE1C,6BAA6B;QAC7B,QAAQ,GAAG,CAAC,+BAA+B;YACzC,IAAI;YACJ,MAAM,cAAc,KAAK;YACzB,SAAS,CAAC,iCAAiC,EAAE,cAAc,IAAI,EAAE;YACjE,MAAM;QACR;QAEA,0BAA0B;QAC1B,MAAM,EAAE,MAAM,EAAE,GAAG;QACnB,MAAM,SAAS,IAAI,OAAO,QAAQ,GAAG,CAAC,cAAc;QAEpD,MAAM,OAAO,MAAM,CAAC,IAAI,CAAC;YACvB,MAAM;YACN,IAAI;YACJ,SAAS,CAAC,iCAAiC,EAAE,cAAc,IAAI,EAAE;YACjE,MAAM,CAAC;;;;;;sCAMyB,EAAE,cAAc,IAAI,CAAC;uDACJ,EAAE,cAAc,KAAK,CAAC,EAAE,EAAE,cAAc,KAAK,CAAC;uCAC9D,EAAE,cAAc,KAAK,IAAI,eAAe;;;;yCAItC,EAAE,cAAc,OAAO,CAAC;;;;;;;MAO3D,CAAC;QACH;QAEA,+DAA+D;QAC/D,qBAAqB;QACrB,+DAA+D;QAC/D;;;;;;;;;;;;;;;;;IAiBA,GAEA,OAAO,gJAAY,CAAC,IAAI,CACtB;YACE,SAAS;YACT,SAAS;QACX,GACA;YAAE,QAAQ;QAAI;IAElB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,uBAAuB;QAErC,IAAI,iBAAiB,yKAAC,CAAC,QAAQ,EAAE;YAC/B,OAAO,gJAAY,CAAC,IAAI,CACtB;gBACE,SAAS;gBACT,OAAO,MAAM,MAAM,CAAC,EAAE,CAAC,OAAO;YAChC,GACA;gBAAE,QAAQ;YAAI;QAElB;QAEA,OAAO,gJAAY,CAAC,IAAI,CACtB;YACE,SAAS;YACT,OAAO;QACT,GACA;YAAE,QAAQ;QAAI;IAElB;AACF"}}]
}